<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Flipkart x NewYear</title>
<style>
/* RESET & BODY */
*{box-sizing:border-box;font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;}

html{
  scroll-behavior: smooth;
}

body{
  margin:0;
  padding:0;
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:flex-start;
  background: #1a1a1a; 
  overflow-y: auto;
}

/* PAGE CONTAINER */
.page{
  display:none;
  width:95%;
  max-width:450px;
  background:#fff;
  margin:20px auto;
  border-radius:20px;
  box-shadow: 0 10px 40px rgba(0,0,0,0.5);
  padding:24px;
  animation: pageReveal 0.8s cubic-bezier(0.22, 1, 0.36, 1);
  position: relative;
  z-index: 10;
}
.page.active{display:block}

/* PROGRESS BAR */
.progress-container {
    width: 100%;
    height: 6px;
    background: #eee;
    border-radius: 10px;
    margin: 15px 0;
    overflow: hidden;
}
.progress-fill {
    height: 100%;
    width: 25%;
    background: #2874f0;
    transition: width 0.4s ease;
}

/* HEADINGS */
h1{color: #000; font-size: 22px; text-align:center; margin-bottom: 8px; text-transform: uppercase;}
h2{text-align:center; margin:15px 0; font-weight:700; color: #000; text-transform: uppercase;}
p{text-align:center; font-size:14px; color:#666; margin-bottom: 20px;}

/* IMAGE ENHANCEMENTS */
.hero-container {
  width: 100%;
  border-radius: 12px;
  overflow: hidden;
  margin-bottom: 20px;
}
#page1 .hero-container {}
#page2 .hero-container { border: 2px solid #fb641b; }
.hero { width: 100%; height: auto; aspect-ratio: 16 / 9; object-fit: cover; display: block; }

/* ENHANCED QUESTION ANIMATION */
.q{
  display:none;
  margin:14px 0;
  padding:20px;
  background:#f8f9fa;
  border: 1px solid #e0e0e0;
  border-radius:16px;
  /* Smoother Transition State */
  opacity: 0;
  transform: translateY(20px) scale(0.95);
  transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}
.q.active{
  display:block;
  opacity: 1;
  transform: translateY(0) scale(1);
}

label{
    display:flex; align-items: center; margin:12px 0; font-size: 15px; 
    cursor:pointer; background: #fff; padding: 12px; border-radius: 10px; 
    border: 1px solid #ddd; transition: 0.2s;
}
label:hover { border-color: #000; background: #f0f0f0; }
label input { margin-right: 12px; accent-color: #000; }

/* BUTTONS */
button{
  width:100%; padding:16px; margin-top:10px; border:none; border-radius:12px;
  background:#000; color:#fff; font-weight:700; font-size:16px; cursor:pointer;
  text-transform: uppercase; transition: transform 0.2s, background 0.3s;
}
button:active { transform: scale(0.98); }
button:disabled{background: #ccc; color: #888; cursor: not-allowed;}

/* CONFETTI */
.confetti{ position:fixed; width:10px; height:10px; top:-20px; animation: fall 1.5s linear forwards; z-index: 5; }
@keyframes fall{ to{transform:translateY(110vh) rotate(360deg); opacity: 0.5;} }
@keyframes pageReveal { from{opacity:0; transform: scale(0.9); } to{opacity:1; transform: scale(1); } }

/* COUPON */
.coupon{
  display:none; background: linear-gradient(135deg, #fb641b, #ff9f00); 
  color:#fff; padding:18px; border-radius:12px; text-align:center; font-weight:800;
  border: 2px dashed #fff; animation: pulse 1.5s infinite;
}
@keyframes pulse { 0% {transform: scale(1);} 50% {transform: scale(1.03);} 100% {transform: scale(1);} }
/* REVIEW HEADER */
.review-header{
  display:flex;
  align-items:center;
  gap:10px;
  margin-bottom:6px;
}

/* AVATAR */
.avatar{
  width:36px;
  height:36px;
  border-radius:50%;
  background:#2874f0;
  color:#fff;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:700;
  font-size:14px;
  flex-shrink:0;
}

/* NAME + META */
.review-meta{
  font-size:12px;
  color:#555;
}
.review-meta b{
  color:#000;
  font-size:13px;
}
.badge{
  background:#e6f4ea;
  color:#137333;
  font-size:10px;
  padding:2px 6px;
  border-radius:6px;
  margin-left:6px;
}

/* TIMESTAMP */
.time{
  font-size:11px;
  color:#888;
}

/* COLLAPSE BUTTON */
.toggle-btn{
  width:100%;
  background:#f1f1f1;
  color:#000;
  font-size:12px;
  padding:8px;
  border-radius:10px;
  margin-top:8px;
  cursor:pointer;
  text-align:center;
  font-weight:600;
}

/* OUTSIDE COMMENT BOX STYLE */
.review-box{
  background:#ffffff;
  border:1px solid #e0e0e0;
  border-radius:14px;
  padding:14px;
  margin:10px auto;
  box-shadow: 0 4px 12px rgba(0,0,0,0.08);
  font-size:14px;
  color:#333;
  width:100%;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.review-box:hover{
  transform: translateY(-2px);
  box-shadow: 0 6px 18px rgba(0,0,0,0.12);
}

/* CENTER REVIEWS SECTION */
.reviews-container{
  max-height:220px;
  overflow-y:auto;
  margin:0 auto;              /* center horizontally */
  padding:4px 2px;
}

/* CENTER REVIEW BOX BUT KEEP TEXT CLEAN */
.review-box{
  margin-left:auto;
  margin-right:auto;
  width:100%;                 /* full width inside card */
}

/* CENTER TOGGLE BUTTON */
.toggle-btn{
  display:flex;
  justify-content:center;
  align-items:center;
  margin-left:auto;
  margin-right:auto;
}

/* CENTER REVIEWS TITLE */
.reviews-title{
  text-align:center;
}

</style>
</head>

<body>

<div class="page active" id="page1">
  <h1>FLIPKART X NEWYEAR</h1>
  <div class="progress-container"><div class="progress-fill" id="pBar"></div></div>
  
  <div class="hero-container">
    <img class="hero" src="https://images.unsplash.com/photo-1654573817889-296cad084c97?q=80&w=1162&auto=format&fit=crop" alt="Sale">
  </div>
  
<!-- 320x50 Banner Ad -->
<div style="text-align:center; margin:12px 0;">
<script type="text/javascript">
  atOptions = {
    'key' : '3f46c923b81bc2a1006c74fe58a54aaa',
    'format' : 'iframe',
    'height' : 50,
    'width' : 320,
    'params' : {}
  };
  
</script>
<script src="https://www.highperformanceformat.com/3f46c923b81bc2a1006c74fe58a54aaa/invoke.js"></script>
</div>

  <div class="q active" id="q1">
    <b>1. Do you shop regularly on Flipkart?</b>
    <label><input type="radio" name="q1" onclick="nextQ(2, '50%')"> Yes, frequently</label>
   	<label><input type="radio" name="q1" onclick="nextQ(2, '50%')"> Sometimes</label>
    <label><input type="radio" name="q1" onclick="nextQ(2, '50%')"> always </label>
	<label><input type="radio" name="q1" onclick="nextQ(2, '50%')"> Not at all</label>
	
  </div>

  <div class="q" id="q2">
    <b>2. What are you looking for this New Year?</b>
    <label><input type="radio" name="q2" onclick="nextQ(3, '75%')"> Electronics</label>
    <label><input type="radio" name="q2" onclick="nextQ(3, '75%')"> Fashion</label>
	<label><input type="radio" name="q2" onclick="nextQ(3, '75%')"> Grocery </label>
	<label><input type="radio" name="q2" onclick="nextQ(3, '75%')"> Home decor </label>
  </div>
  
  <!-- 300x250 Banner Ad -->
<div style="text-align:center; margin:15px 0;">
  <script type="text/javascript">
    atOptions = {
      'key' : '9c7d946e2105f9e6a07ffc49d5b61345',
      'format' : 'iframe',
      'height' : 250,
      'width' : 300,
      'params' : {}
    };
  </script>
  <script src="https://www.highperformanceformat.com/9c7d946e2105f9e6a07ffc49d5b61345/invoke.js"></script>
</div>


  <div class="q" id="q3">
    <b>3. Rate experience:</b>
    <label><input type="radio" name="q3" onclick="nextQ(4, '100%')"> 5 star</label>
    <label><input type="radio" name="q3" onclick="nextQ(4, '100%')"> 4 star</label>
    <label><input type="radio" name="q3" onclick="nextQ(4, '100%')"> 3 star</label>	
    <label><input type="radio" name="q3" onclick="nextQ(4, '100%')"> 2 star</label>	
  </div>

  <div class="q" id="q4">
    <b>4.Will you tell others about flipkart ?</b>
    <label><input type="radio" name="q4" onclick="enableContinue()"> YES definitely </label>
	 <label><input type="radio" name="q4" onclick="enableContinue()"> Never</label>
  </div>
  
  <!-- Native Ad -->
<div style="margin:10px 0;">
<script async data-cfasync="false"
src="https://pl28264390.effectivegatecpm.com/dd91a6316ac3de5bf92224509e1eba7e/invoke.js"></script>
<div id="container-dd91a6316ac3de5bf92224509e1eba7e"></div>
</div>

  
<div style="margin:20px 0;">
  <h3 style="text-align:center;font-size:15px;margin-bottom:10px;color:#000;">
    ‚≠ê User Reviews
  </h3>

  <div class="reviews-container" id="reviews">
    
    <div class="review-box">
      <div class="review-header">
        <div class="avatar">RS</div>
        <div class="review-meta">
          <b>Rahul S.</b>
          <span class="badge">Verified User</span><br>
          <span class="time">2 mins ago</span>
        </div>
      </div>
      Got ‚Çπ2000 coupon instantly , thanks to flipkart , this means a lot üòç
    </div>
	
	 <div class="review-box">
      <div class="review-header">
        <div class="avatar">BR</div>
        <div class="review-meta">
          <b>Bharath R</b>
          <span class="time">1 day ago</span>
        </div>
      </div>
      i cant say how crazy is this site , it is really giving the coupons üòçüòçüòç
    </div>

    <div class="review-box">
      <div class="review-header">
        <div class="avatar">AK</div>
        <div class="review-meta">
          <b>Anjali K.</b>
          <span class="badge">Verified User</span><br>
          <span class="time">5 mins ago</span>
        </div>
      </div>
      This actually worked for me, thanks Flipkart üî•
    </div>

    <div class="review-box">
      <div class="review-header">
        <div class="avatar">VR</div>
        <div class="review-meta">
          <b>Vikram R.</b>
          <span class="badge">Verified User</span><br>
          <span class="time">Today</span>
        </div>
      </div>
      Shared with friends and unlocked reward üéâ
    </div>
	
    <div class="review-box">
      <div class="review-header">
        <div class="avatar">RG</div>
        <div class="review-meta">
          <b>Rajesh Gurram .</b>
          <span class="time">Today</span>
        </div>
      </div>
      just guys believe in this and Shared with friends and unlocked reward , just awesome üéâ
    </div>

    <div class="review-box">
      <div class="review-header">
        <div class="avatar">PM</div>
        <div class="review-meta">
          <b>Pooja M.</b>
          <span class="badge">Verified User</span><br>
          <span class="time">Today</span>
        </div>
      </div>
      Smooth process, coupon received üíØ
    </div>

    <div class="review-box">
      <div class="review-header">
        <div class="avatar">ST</div>
        <div class="review-meta">
          <b>Suresh T.</b>
          <span class="badge">Verified User</span><br>
          <span class="time">Yesterday</span>
        </div>
      </div>
      New Year luck finally worked üòÑ
    </div>

  </div>

  <div class="toggle-btn" onclick="toggleReviews()">Show more reviews</div>
</div>

  <button id="continueBtn" onclick="goPage(2)" disabled>Check Eligibility</button>
</div>

<div class="page" id="page2">
  <h2>üéÅ Congratulations!</h2>
  <div class="hero-container"><img class="hero" src="https://images.unsplash.com/photo-1549465220-1a8b9238cd48?auto=format&fit=crop&w=800&q=80"></div>
  <p>Invite 5 friends to unlock your coupon.</p>
  <p><b>Invited: <span id="count">0</span> / 5</b></p>
  <button onclick="share()" style="background:#25D366;">Invite via WhatsApp</button>
  <!-- Social Ad -->
<div style="text-align:center; margin:15px 0;">
<script src="https://pl28267382.effectivegatecpm.com/a1/2f/06/a12f06e4827b79be7b82dd12c3c89fa0.js"></script>
</div>

  <button onclick="goDetails()">Redeem Now</button>
</div>

<div class="page" id="page3">
  <h2>Final Step</h2>

  <!-- Show coupon code from Page 2 -->
  <div class="coupon" id="couponPage3" style="margin-bottom:15px; display:block;">
    üéâ CODE: NEW0XF5699
  </div>

  <input placeholder="Full Name"
    style="width:100%;padding:14px;margin:10px 0;border:1px solid #000;border-radius:8px;">
	 <input placeholder="Age"
    style="width:100%;padding:14px;margin:10px 0;border:1px solid #000;border-radius:8px;">
	 <input placeholder="E Mail"
    style="width:100%;padding:14px;margin:10px 0;border:1px solid #000;border-radius:8px;">

  <button onclick="finishAndReturn()">Finish</button>
</div>

<script>

/* ===============================
   WHATSAPP SAFE INVITE TRACKER
================================ */

function handleInvite(){
  const params = new URLSearchParams(window.location.search);
  const inviteId = params.get("invite_id");
  if(!inviteId) return;

  let used = JSON.parse(localStorage.usedInvites || "[]");
  let count = parseInt(localStorage.invites || "0");

  if(!used.includes(inviteId)){
    used.push(inviteId);
    count = Math.min(count + 1, 5);

    localStorage.usedInvites = JSON.stringify(used);
    localStorage.invites = count;
  }

  // clean URL
  window.history.replaceState({}, document.title, window.location.pathname);

const el = document.getElementById("count");
if(el) el.innerText = count;

}


/* ===============================
   BASIC STATE
================================ */
let confettiInterval = null;
let count = parseInt(localStorage.invites || "0");
const countEl = document.getElementById("count");
if (countEl) countEl.innerText = count;

/* ===============================
   SHARE (WHATSAPP)
================================ */
function share(){
  const inviteId = Date.now() + "_" + Math.random().toString(36).slice(2);

  const link =
    "https://reactstudios.github.io/flipkartxnewyear/?invite_id=" + inviteId;

  const message =
    "üéâ Flipkart New Year Surprise! üéÅ\n\n" +
    "I just unlocked a ‚Çπ2000 Flipkart Gift Coupon.\n" +
    "Try your luck here üëá\n\n" +
    link + "\n\n" +
    "Hurry! Limited time ‚è≥";

  window.location.href =
    "https://wa.me/?text=" + encodeURIComponent(message);
}

/* ===============================
   UI FUNCTIONS
================================ */
function goPage(n){
  document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
  document.getElementById("page"+n).classList.add("active");

  if(n === 2){
    confettiInterval = setInterval(createSingleConfetti, 50);
  } else {
    clearInterval(confettiInterval);
  }
}

function nextQ(n, progress){
  document.getElementById("pBar").style.width = progress;
  const next = document.getElementById("q"+n);
  if(next){
    next.style.display = "block";
    setTimeout(()=>next.classList.add("active"),10);
    next.scrollIntoView({behavior:"smooth"});
  }
}

function enableContinue(){
  document.getElementById("continueBtn").disabled = false;
}

/* ===============================
   COUPON LOGIC
================================ */
function goDetails(){
  let count = parseInt(localStorage.invites || "0");
  document.getElementById("count").innerText = count;

  if(count < 5){
    alert("Invite " + (5 - count) + " more friends!");
    return;
  }
  goPage(3);
  document.getElementById("couponPage3").style.display = "block";
}

/* ===============================
   CONFETTI
================================ */
function createSingleConfetti(){
  const c=document.createElement("div");
  c.className="confetti";
  c.style.left=Math.random()*100+"vw";
  c.style.background=["#fb641b","#2874f0","#ff0","#0f0"][Math.floor(Math.random()*4)];
  const s=Math.random()*8+5+"px";
  c.style.width=s;c.style.height=s;
  document.body.appendChild(c);
  setTimeout(()=>c.remove(),1500);
}

document.addEventListener("DOMContentLoaded", handleInvite);
window.addEventListener("pageshow", handleInvite);
	
</script>

</body>
</html>